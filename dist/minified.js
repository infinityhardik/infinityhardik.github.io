function sendOrder(){selectedProducts.sort((t,e)=>{const o=t.product["Group Alias"].localeCompare(e.product["Group Alias"]);if(o===0){return t.product.Product.localeCompare(e.product.Product)}return o});let c="";let r=null;selectedProducts.forEach(t=>{const{"Group Alias":e,Product:o,"Group Name":n}=t.product;if(r!==e){c+=`\n*${n}* :\n`;r=e}c+=`${o} - ${t.quantity}\n`});const t="+916355360702";const e=encodeURIComponent(c);const o=`https://wa.me/${t}?text=${e}`;window.open(o,"_blank")}async function loadProducts(){try{const t=await fetch("products.json");productsData=await t.json();const e=productsData.productDirectory;displayProducts(e)}catch(t){console.error("Error loading products:",t)}}function displayProducts(t){const r=document.getElementById("product-list");t.forEach(t=>{const e=document.createElement("div");const o=document.createElement("input");o.type="checkbox";const n=`checkbox-${t.Product.replace(/\s/g,"-")}`;o.id=n;const c=document.createElement("label");c.innerHTML=t.Product;c.setAttribute("for",n);e.appendChild(o);e.appendChild(c);e.onclick=()=>toggleProduct(t.Product);r.appendChild(e)})}function getProductDetails(e){if(productsData&&productsData.productDirectory){const t=productsData.productDirectory;const o=t.find(t=>t.Product===e);return o||{}}return{}}window.onload=loadProducts;function openOrderModal(t){resetQuantityToZero();const e=document.getElementById("order-modal");const o=document.getElementById("modal-product-name");const n=getProductDetails(t);o.textContent=t;document.getElementById("modal-group-name").textContent=`Thickness = ${n["Group Name"]}`;document.getElementById("modal-prod-category").textContent=`Size = ${n["Prod. Category"]}`;document.getElementById("modal-product-type").textContent=`Brand Type = ${n["Product Type"]}`;e.style.display="block"}function closeOrderModal(t){const e=document.getElementById("order-modal");const o=document.getElementById("quantity");const n=document.getElementById("modal-product-name").textContent;if(t&&t.type==="keydown"&&t.key==="Escape"){o.value="0"}if(parseInt(o.value,10)===0){const c=document.querySelectorAll('#product-list input[type="checkbox"]');c.forEach(t=>{const e=t.nextElementSibling;if(e.textContent===n){t.checked=false}})}e.style.display="none"}document.addEventListener("keydown",closeOrderModal);function toggleProduct(e){const t=selectedProducts.findIndex(t=>t.product===e);if(t===-1){openOrderModal(e);resetQuantityToZero()}else{selectedProducts.splice(t,1);updateOrderList()}}let selectedProducts=[];let productsData;function addToOrder(){const t=document.getElementById("quantity");const o=document.getElementById("modal-product-name").textContent;const e=parseInt(t.value,10);if(e>0){const n=getProductDetails(o);if(n&&Object.keys(n).length>0){selectedProducts.push({product:n,quantity:e});updateOrderList()}else{console.error("Product details not found for:",o)}}else{const c=document.querySelectorAll('#product-list input[type="checkbox"]');const r=Array.from(c).find(t=>{const e=t.nextElementSibling;return e&&(e.textContent||e.innerText)===o});if(r){r.checked=true}r.checked=false}closeOrderModal()}function clearOrder(){const t=document.querySelectorAll('#product-list input[type="checkbox"]');t.forEach(t=>t.checked=false);selectedProducts=[];updateOrderList();clearSearch()}function updateOrderList(){const t=document.getElementById("selected-products");t.value=selectedProducts.map(t=>`${t.product.Product} - ${t.quantity}`).join("\n");t.scrollTop=t.scrollHeight}let currentQuantity="0";function appendToQuantity(t){if(currentQuantity==="0"){currentQuantity=t}else{currentQuantity+=t}updateQuantityInput()}function clearLastDigit(){currentQuantity=currentQuantity.slice(0,-1);if(currentQuantity===""){currentQuantity="0"}updateQuantityInput()}function updateQuantityInput(){const t=document.getElementById("quantity");t.value=currentQuantity}function clearAllDigits(){currentQuantity="0";updateQuantityInput()}function resetQuantityToZero(){currentQuantity="0";updateQuantityInput()}const searchBox=document.getElementById("search-box");function scrollSearchBoxToTop(){searchBox.scrollIntoView({behavior:"smooth",block:"start"})}searchBox.addEventListener("focus",()=>{scrollSearchBoxToTop()});searchBox.addEventListener("input",()=>{scrollSearchBoxToTop()});function clearSearch(){const t=document.getElementById("search-box");t.value="";filterProducts();document.body.scrollIntoView({behavior:"smooth"})}function filterProducts(){const t=document.getElementById("search-box");const e=t.value.toUpperCase();const o=document.getElementById("product-list");const n=o.getElementsByTagName("div");for(let t=0;t<n.length;t++){const c=n[t].getElementsByTagName("label")[0];const r=c.textContent||c.innerText;if(containsInOrder(r,e)){n[t].style.display=""}else{n[t].style.display="none"}}}function containsInOrder(e,o){e=e.toUpperCase();o=o.toUpperCase();let n=0;for(let t=0;t<o.length;t++){n=e.indexOf(o[t],n);if(n===-1){return false}n++}return true}