function sendOrder(){if(0===parseInt(currentQuantity,10)||0===selectedProducts.length)console.warn("Quantity is zero or no products in the order. Please add products to the order.");else{selectedProducts.sort((t,e)=>{var o=t.product["Group Alias"].localeCompare(e.product["Group Alias"]);return 0===o?t.product.Product.localeCompare(e.product.Product):o});let n="",c=null;selectedProducts.forEach(t=>{var{"Group Alias":e,Product:o,"Group Name":r}=t.product;c!==e&&(n+=`
*${r}* :
`,c=e),n+=`${o} - ${t.quantity}\n`});var t=calculateTotalQuantity(),t=(n+=`
Total : *${t}* Pcs.
`,encodeURIComponent(n));window.open("https://wa.me/+916355360702?text="+t,"_blank")}}function calculateTotalQuantity(){return selectedProducts.reduce((t,e)=>t+e.quantity,0)}async function loadProducts(){try{var t=await fetch("products.json");displayProducts((productsData=await t.json()).productDirectory)}catch(t){console.error("Error loading products:",t)}}function displayProducts(t){const c=document.getElementById("product-list");t.forEach(t=>{var e=document.createElement("div"),o=document.createElement("input"),r=(o.type="checkbox","checkbox-"+t.Product.replace(/\s/g,"-")),n=(o.id=r,document.createElement("label"));n.innerHTML=t.Product,n.setAttribute("for",r),e.appendChild(o),e.appendChild(n),e.onclick=()=>toggleProduct(t.Product),c.appendChild(e)})}function getProductDetails(e){return productsData&&productsData.productDirectory&&productsData.productDirectory.find(t=>t.Product===e)||{}}function openOrderModal(t){resetQuantityToZero();var e=document.getElementById("order-modal"),o=document.getElementById("modal-product-name"),r=getProductDetails(t);o.textContent=t,document.getElementById("modal-group-name").textContent="Thickness = "+r["Group Name"],document.getElementById("modal-prod-category").textContent="Size = "+r["Prod. Category"],document.getElementById("modal-product-type").textContent="Brand Type = "+r["Product Type"],e.style.display="block"}function closeOrderModal(t){var e=document.getElementById("order-modal"),o=document.getElementById("quantity");const r=document.getElementById("modal-product-name").textContent;t&&"keydown"===t.type&&"Escape"===t.key&&(o.value="0"),0===parseInt(o.value,10)&&document.querySelectorAll('#product-list input[type="checkbox"]').forEach(t=>{t.nextElementSibling.textContent===r&&(t.checked=!1)}),e.style.display="none"}function toggleProduct(e){var t=document.getElementById("checkbox-"+e.replace(/\s/g,"-")),o=selectedProducts.findIndex(t=>t.product.Product===e);t.checked=!t.checked,(t.checked&-1===o?(openOrderModal(e),resetQuantityToZero):(selectedProducts=selectedProducts.filter(t=>t.product.Product!==e),updateOrderList))()}window.onload=loadProducts,document.addEventListener("keydown",closeOrderModal);let selectedProducts=[],productsData;function addToOrder(){var t=document.getElementById("quantity");const e=document.getElementById("modal-product-name").textContent;var o,t=parseInt(t.value,10);0<t?(o=getProductDetails(e))&&0<Object.keys(o).length?(selectedProducts.push({product:o,quantity:t}),updateOrderList()):console.error("Product details not found for:",e):(o=document.querySelectorAll('#product-list input[type="checkbox"]'),(t=Array.from(o).find(t=>{t=t.nextElementSibling;return t&&(t.textContent||t.innerText)===e}))&&(t.checked=!0),t.checked=!1),closeOrderModal()}function clearOrder(){document.querySelectorAll('#product-list input[type="checkbox"]').forEach(t=>t.checked=!1),selectedProducts=[],updateOrderList(),clearSearch()}function updateOrderList(){var t=document.getElementById("selected-products");t.value=selectedProducts.map(t=>t.product.Product+" - "+t.quantity).join("\n")+(`
Total : `+calculateTotalQuantity()),t.scrollTop=t.scrollHeight}let currentQuantity="0";function appendToQuantity(t){"0"===currentQuantity?currentQuantity=t:currentQuantity+=t,updateQuantityInput()}function clearLastDigit(){""===(currentQuantity=currentQuantity.slice(0,-1))&&(currentQuantity="0"),updateQuantityInput()}function updateQuantityInput(){document.getElementById("quantity").value=currentQuantity}function clearAllDigits(){currentQuantity="0",updateQuantityInput()}function resetQuantityToZero(){currentQuantity="0",updateQuantityInput()}const searchBox=document.getElementById("search-box");function scrollSearchBoxToTop(){searchBox.scrollIntoView({behavior:"smooth",block:"start"})}function clearSearch(){document.getElementById("search-box").value="",filterProducts(),document.body.scrollIntoView({behavior:"smooth"})}function filterProducts(){var e=document.getElementById("search-box").value.toUpperCase(),o=document.getElementById("product-list").getElementsByTagName("div");for(let t=0;t<o.length;t++){var r=o[t].getElementsByTagName("label")[0];containsInOrder(r.textContent||r.innerText,e)?o[t].style.display="":o[t].style.display="none"}}function containsInOrder(e,o){e=e.toUpperCase(),o=o.toUpperCase();let r=0;for(let t=0;t<o.length;t++){if(-1===(r=e.indexOf(o[t],r)))return!1;r++}return!0}searchBox.addEventListener("focus",()=>{scrollSearchBoxToTop()}),searchBox.addEventListener("input",()=>{scrollSearchBoxToTop()});