function sendOrder(){if(0===parseInt(currentQuantity,10)||0===selectedProducts.length)console.warn("Quantity is zero or no products in the order. Please add products to the order.");else{selectedProducts.sort((e,t)=>{var r,o=e.product["Group Alias"].localeCompare(t.product["Group Alias"]);return 0===o?0===(r=e.product["Prod. Category"].localeCompare(t.product["Prod. Category"]))?e.product.Product.localeCompare(t.product.Product):r:o});let n="",c=null;selectedProducts.forEach(e=>{var{"Group Alias":t,Product:r,"Group Name":o}=e.product;c!==t&&(n+=`
*${o}* :
`,c=t),n+=`${r} - ${e.quantity}\n`});var e=calculateTotalQuantity(),e=(n+=`
Total : *${e}* Pcs.
`,encodeURIComponent(n));window.open("https://wa.me/+916355360702?text="+e,"_blank")}}function calculateTotalQuantity(){return selectedProducts.reduce((e,t)=>e+t.quantity,0)}let selectedFilters={};function openFilterModal(){var e=document.getElementById("filter-modal");populateFilterOptions(),setCheckboxStates(),e.style.display="block",updateClearFiltersButtonStyle()}function closeFilterModal(){document.getElementById("filter-modal").style.display="none"}function setCheckboxStates(){document.getElementById("filter-options").querySelectorAll('input[type="checkbox"]').forEach(e=>{var t=e.id.split("-"),r=t[2],t=t.slice(3).join("-");r in selectedFilters&&selectedFilters[r].includes(t)?(e.checked=!0,e.nextElementSibling.style.fontWeight="bold",populateUniqueValues(r)):(e.checked=!1,e.nextElementSibling.style.fontWeight="normal",e.nextElementSibling.style.background="none")})}function populateFilterOptions(){var e=document.getElementById("filter-options"),t=(e.innerHTML="",getAllKeys(productsData.productDirectory));const n=document.createElement("ul");t.forEach(e=>{var t,r,o;"Product"!==e&&"Group Alias"!==e&&"Prod. Category"!==e&&(t=document.createElement("li"),(r=document.createElement("input")).type="checkbox",r.id="filter-checkbox-"+e,r.addEventListener("change",()=>populateUniqueValues(e)),(o=document.createElement("label")).innerHTML=e,o.setAttribute("for","filter-checkbox-"+e),t.appendChild(r),t.appendChild(o),n.appendChild(t))}),e.appendChild(n)}function getAllKeys(e){const t=new Set;return e.forEach(e=>{Object.keys(e).forEach(e=>{t.add(e)})}),Array.from(t)}function populateUniqueValues(o){var e=document.getElementById("filter-options"),t=document.getElementById("filter-checkbox-"+o);const n=selectedFilters[o]||[];let c=e.querySelector(`[data-filter-container="${o}"]`);c||((c=document.createElement("div")).setAttribute("data-filter-container",o),e.appendChild(c)),c.innerHTML="",t.checked&&getUniqueValues(productsData.productDirectory,o).forEach(e=>{var t=document.createElement("input"),r=(t.type="checkbox",t.id=`filter-checkbox-${o}-`+e,n.includes(e)&&(t.checked=!0),document.createElement("label"));r.innerHTML=e,r.setAttribute("for",`filter-checkbox-${o}-`+e),t.addEventListener("change",()=>updateSelectedFilters(o,e)),c.appendChild(r),c.appendChild(t)})}function updateSelectedFilters(e,t){document.getElementById(`filter-checkbox-${e}-`+t).checked?(e in selectedFilters||(selectedFilters[e]=[]),selectedFilters[e].push(t)):selectedFilters[e]=selectedFilters[e].filter(e=>e!==t)}function getUniqueValues(e,t){const r=new Set;return e.forEach(e=>{t in e&&r.add(e[t])}),Array.from(r)}function applyFilters(){selectedFilters=getSelectedFilters(),updateClearFiltersButtonStyle(),0===Object.keys(selectedFilters).length?(clearFilters(),displayProducts(productsData.productDirectory)):(displayProducts(filterProductsBySelectedFilters(selectedFilters)),closeFilterModal())}function clearFilters(){selectedFilters={};var e=document.getElementById("filter-options");e.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.checked=!1}),e.innerHTML="",displayProducts(productsData.productDirectory),updateClearFiltersButtonStyle()}function filterProductsBySelectedFilters(r){return productsData.productDirectory.filter(e=>{for(const t in r)if(!r[t].includes(String(e[t])))return!1;return!0})}function getSelectedFilters(){var e=document.getElementById("filter-options").querySelectorAll('input[type="checkbox"]');const r={};return e.forEach(e=>{var t;e.checked&&(t=(e=e.id.split("-"))[2],e=e.slice(3).join("-"),t in r||(r[t]=[]),r[t].push(e))}),r}function updateClearFiltersButtonStyle(){var e=document.getElementById("filterProductList"),t=document.getElementById("clearFilters");0<Object.keys(selectedFilters).length?(e.style.backgroundColor="darkblue",t.style.backgroundColor="black",t.style.color="white"):(e.style.backgroundColor="",t.style.backgroundColor="",t.style.color="")}async function loadProducts(){try{var e=await fetch("products.json");displayProducts((productsData=await e.json()).productDirectory)}catch(e){console.error("Error loading products:",e)}}function displayProducts(e){const c=document.getElementById("product-list");c.innerHTML="",e.forEach(e=>{var t=document.createElement("div"),r=document.createElement("input"),o=(r.type="checkbox","checkbox-"+e.Product.replace(/\s/g,"-")),n=(r.id=o,document.createElement("label"));n.innerHTML=e.Product,n.setAttribute("for",o),t.appendChild(r),t.appendChild(n),t.onclick=()=>toggleProduct(e.Product),c.appendChild(t)})}function getProductDetails(t){return productsData&&productsData.productDirectory&&productsData.productDirectory.find(e=>e.Product===t)||{}}function openOrderModal(e){resetQuantityToZero();var t=document.getElementById("order-modal"),r=document.getElementById("modal-product-name"),o=getProductDetails(e);r.textContent=e,document.getElementById("modal-product-type").innerHTML="<b>Product Type :</b> "+o["Product Type"],document.getElementById("modal-face-type").innerHTML="<b>Face Type :</b> "+o["Face Type"],document.getElementById("modal-core-type").innerHTML="<b>Core Type :</b> "+o["Core Type"],document.getElementById("modal-grade").innerHTML="<b>Grade :</b> "+o.Grade,document.getElementById("modal-branding").innerHTML="<b>Branding :</b> "+o.Branding,t.style.display="block"}function closeOrderModal(e){var t=document.getElementById("order-modal"),r=document.getElementById("quantity");const o=document.getElementById("modal-product-name").textContent;e&&"keydown"===e.type&&"Escape"===e.key&&(r.value="0"),0===parseInt(r.value,10)&&document.querySelectorAll('#product-list input[type="checkbox"]').forEach(e=>{e.nextElementSibling.textContent===o&&(e.checked=!1)}),t.style.display="none"}function toggleProduct(t){var e=document.getElementById("checkbox-"+t.replace(/\s/g,"-")),r=selectedProducts.findIndex(e=>e.product.Product===t);e.checked=!e.checked,(e.checked&-1===r?(openOrderModal(t),resetQuantityToZero):(selectedProducts=selectedProducts.filter(e=>e.product.Product!==t),updateOrderList))()}window.onload=loadProducts,document.addEventListener("keydown",closeOrderModal);let selectedProducts=[],productsData;function addToOrder(){var e=document.getElementById("quantity");const t=document.getElementById("modal-product-name").textContent;var r,e=parseInt(e.value,10);0<e?(r=getProductDetails(t))&&0<Object.keys(r).length?(selectedProducts.push({product:r,quantity:e}),updateOrderList()):console.error("Product details not found for:",t):(r=document.querySelectorAll('#product-list input[type="checkbox"]'),(e=Array.from(r).find(e=>{e=e.nextElementSibling;return e&&(e.textContent||e.innerText)===t}))&&(e.checked=!0),e.checked=!1),closeOrderModal()}function clearOrder(){document.querySelectorAll('#product-list input[type="checkbox"]').forEach(e=>e.checked=!1),selectedProducts=[],updateOrderList(),clearSearch()}function updateOrderList(){var e=document.getElementById("selected-products");e.value=selectedProducts.map(e=>e.product.Product+" - "+e.quantity).join("\n")+(`
Total : `+calculateTotalQuantity()),e.scrollTop=e.scrollHeight}let currentQuantity="0";function appendToQuantity(e){"0"===currentQuantity?currentQuantity=e:currentQuantity+=e,updateQuantityInput()}function clearLastDigit(){""===(currentQuantity=currentQuantity.slice(0,-1))&&(currentQuantity="0"),updateQuantityInput()}function updateQuantityInput(){document.getElementById("quantity").value=currentQuantity}function clearAllDigits(){currentQuantity="0",updateQuantityInput()}function resetQuantityToZero(){currentQuantity="0",updateQuantityInput()}const searchBox=document.getElementById("search-box");function scrollSearchBoxToTop(){searchBox.scrollIntoView({behavior:"smooth",block:"start"})}function clearSearch(){document.getElementById("search-box").value="",filterProducts(),document.body.scrollIntoView({behavior:"smooth"})}function filterProducts(){var t=document.getElementById("search-box").value.toUpperCase(),r=document.getElementById("product-list").getElementsByTagName("div");for(let e=0;e<r.length;e++){var o=r[e].getElementsByTagName("label")[0];containsInOrder(o.textContent||o.innerText,t)?r[e].style.display="":r[e].style.display="none"}}function containsInOrder(t,r){t=t.toUpperCase(),r=r.toUpperCase();let o=0;for(let e=0;e<r.length;e++){if(-1===(o=t.indexOf(r[e],o)))return!1;o++}return!0}searchBox.addEventListener("focus",()=>{scrollSearchBoxToTop()}),searchBox.addEventListener("input",()=>{scrollSearchBoxToTop()});